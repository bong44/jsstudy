<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
<script>
    //AJAX Asynchronouse JavaScript (XML -> JSON의 시대)
    //다 외워 1번이 일단 중요
    var v_ajax = new XMLHttpRequest(); //통신 객체생성 (클라이언트가 주는 정보) , 대신 통신을 담당 해 줄 사람
    // v_ajax.open("메소드","URL","비동기여부(통신방식)");
    v_ajax.open("get","data.txt",true); //통신은 무조건 비동기 == true
    v_ajax.send(); //실행함수

    // 클라이언트 측 (응답코드)
    // 0 (uninitialized) - (request가 초기화되지 않음)
    // 1 (loading) - (서버와의 연결이 성사됨)
    // 2 (loaded) - (서버가 request를 받음)
    // 3 (interactive) - (request(요청)을 처리하는 중)
    // 4 (complete) - (request에 대한 처리가 끝났으며 응답할 준비가 완료됨)

    // 서버 측 (응답코드)
    // 1xx (정보): 요청을 받았으며 프로세스를 계속한다
    // 2xx (성공): 요청을 성공적으로 받았으며 인식했고 수용하였다
    // 3xx (리다이렉션): 요청 완료를 위해 추가 작업 조치가 필요하다
    // 4xx (클라이언트 오류): 요청의 문법이 잘못되었거나 요청을 처리할 수 없다
    // 5xx (서버 오류): 서버가 명백히 유효한 요청에 대해 충족을 실패했다
    
    // 200(성공): 서버가 요청을 제대로 처리했다는 뜻이다. 이는 주로 서버가 요청한 페이지를 제공했다는 의미로 쓰인다.
    // 201(작성됨): 성공적으로 요청되었으며 서버가 새 리소스를 작성했다.
    // 202(허용됨): 서버가 요청을 접수했지만 아직 처리하지 않았다.
    // 203(신뢰할 수 없는 정보): 서버가 요청을 성공적으로 처리했지만 다른 소스에서 수신된 정보를 제공하고 있다.
    // 204(콘텐츠 없음): 서버가 요청을 성공적으로 처리했지만 콘텐츠를 제공하지 않는다.
    // 205(콘텐츠 재설정): 서버가 요청을 성공적으로 처리했지만 콘텐츠를 표시하지 않는다. 204 응답과 달리 이 응답은 요청자가 문서 보기를 재설정할 것을 요구한다(예: 새 입력을 위한 양식 비우기).
    // 206(일부 콘텐츠): 서버가 GET 요청의 일부만 성공적으로 처리했다.
    // 207(다중 상태, RFC 4918)
    // 208(이미 보고됨, RFC 5842)
    // 226 IM Used (RFC 3229)
    // 더 많음
    
    //통신객체의 state변화를 체크
    v_ajax.onreadystatechange = function () { //언제 이벤트 발생?
        //상태값 0,1,2,3에는 관심없음, 완료되었다는 4번에만 관심 있음.
        if (v_ajax.readyState == 4 && v_ajax.status == 200) { //통신은 최소 2개의 객체가 통신하는 것이므로 서버의 응답코드도 확인
            //&& 왼쪽이 클라이언트 쪽 응답코드, 오른쪽이 서버 쪽 응답코드
            alert(v_ajax.responseText); //내보내줄 데이터 형식을 정해주는? //왜 3번출력? //제일 많이 쓰는게 텍스트 
        }
        console.log(v_ajax.readyState); //통신객체의 상태값
    }
    //체크가 먼저 나오기 때문에 비동기 방식임을 알 수 있음
    console.log("체크");
</script>
</body>
</html>