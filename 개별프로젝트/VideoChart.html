<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./MyCss.css" type="text/css">
    <script src="./VideoJsp.js"></script>
</head>

<body>
    <form action="">
        <div id="menuBar">
            <img src="tennisimgs/tennisball.png" alt="" style="height: 50px; width: 50px;margin: 5px;"
                onclick="f_home()" onmouseover="f_over(this)">
            <h3 style="position: absolute; left: 3.1%; top: 8px;color: rgb(13, 185, 185);" onclick="f_home()"
                onmouseover="f_over(this)">TENNIS.com</h3>
            <input type="text" id="value" name="search" placeholder="검색"
                style="width: 400px; position: relative; top: -21px; left: 35%;">
            <input type="submit" value=""
                style="width: 50px; height: 30px; overflow: hidden; background-image: url(./tennisimgs/searchicon.png); background-size: 50px 30px; background-position-y: -1px; position: relative; left: 35.5%; top: -11px; border-radius: 15px;">
        </div>
        <div id="vd_container"
            style="z-index: 2; width: 1000px; height: auto; margin: 0px auto; background-color: rgba(221, 220, 220,0.3);">
            <!-- <a href="">
                <div style="margin: 50px auto; width: 800px; height: 200px;">
                    <div style="height: 100%; width: 320px; background-image: url(./tennisimgs/mainVideo1.jpg); background-size: 100% 100%;display: inline-block;"></div>
                    <div style="width: 470px; height: 100%; display: inline-block; vertical-align: top;">
                        <b id="head">머리말</b>
                        <hr>
                        <span id="id_upload" style="color: gray;">업로드날짜</span>
                        <br>
                        <br>
                        <span id="id_con">컨택스트</span>
                    </div>
                </div>
            </a> -->
        </div>
    </form>
    <script>
        //비디오링크는 v로 넘겨줘야 함
        // <!-- ./Video.html?v=&sub=&con=&date= --> -- 형식
        var v_videos = [
            // [이미지경로(0),머리말(1),유튜브링크(2),컨택스트(3),업로드날짜(4)]
             ["./tennisimgs/mainVideo1.jpg", "[하늘쌤테니스꿀팁] 제48편 미친각 포핸드 앵글샷", "6Ja0Mj7mv4Q","많은 분들께서 제 플레이 영상을 보시고 앵글샷 가르쳐 달라하시는 분들이 많았는데요. 이 전에 포핸드 영상을 쭈욱 다 보시고 보시면 좋을거 같아서 못올리고 있었습니다~","조회수 191,165회•2018. 8. 26."]
            ,["./tennisimgs/mainVideo2.jpg", "[하늘쌤테니스꿀팁] 제29편 플렛 서브(프로네이션) 쉽게 하기", "KI31eWjWCcA","생각을 살짝 바꾸면 쉬워져요~^^<br>계속 고급 정보를 드릴수 있는 힘이 되어주세요~^^ 감사합니다~","조회수 179,541회•2018. 7. 8."]
            ,["./tennisimgs/mainVideo3.jpg", "[하늘쌤테니스꿀팁] 제1편 끝내는 발리 잘하기 1탄", "2QYcqMSHHvs","안녕하세요 김하늘 코치 입니다. <br>끝내는 발리를 하실때 많은 선수들이나 동호인 분들이 어려워 하시고 실수가 많으신데요. <br>이 발리를 할때 어떻게 발란스를 잡아야지 좀 더 쉽게 자세가 잡히고 자세를 유지하며 발란스를 잡을수 있는지 설명해드립니다~","조회수 137,622회•2018. 4. 14."]
        ];
        var v_serch = request.getParameter("search");
        var v_value = document.getElementById("value");
        var v_container = document.getElementById("vd_container");

        v_value.value = v_serch;
        
        var v_result = []
        
        var value, name, item, i;
        
        value = v_serch.toUpperCase();

        var drawCnt = 4;
        var scrollDrawCount = drawCnt;
        
        for (i = 0; i < v_videos.length; i++) {
            name = v_videos[i][1];
            if (name.toUpperCase().indexOf(value) > -1) {
                v_result[v_result.length] = v_videos[i];
            }
        }
        
        if (v_result.length < 3) {
            drawCnt = v_result.length;
        }


        if (v_result.length) {
            for (var i = 0; i < drawCnt; i++) {
                //result 배열에 들어간 영상들 화면 안에 꽉차게 우선 출력
                v_container.innerHTML +=
                '<a href="'+'./Video.html?v='+v_result[i][2]+'&sub='+v_result[i][1]+'&con='+v_result[i][3]+'&date='+v_result[i][4]+'" id="id_a">'
                +'<div style="margin: 50px auto; width: 800px; height: 200px;">'
                +    '<div style="height: 100%; width: 320px; background-image: url('+v_result[i][0]+'); background-size: 100% 100%;display: inline-block;"></div>'
                +    '<div style="width: 470px; height: 100%; display: inline-block; vertical-align: top;">'
                +        '<b>'+v_result[i][1]+'</b>'
                +        '<hr>'
                +        '<span style="color: gray;">'+v_result[i][4]+'</span>'
                +        '<br>'
                +        '<br>'
                +        '<span>'+v_result[i][3]+'</span>'
                +    '</div>'
                +'</div>'
                +'</a>';
            }

            
            
        }else{
            //아무것도 v_result에 안 들어왔을 때
            v_container.innerHTML += 
            '<br><br><br><br><h2 style="text-align: center;">찾으시는 영상이 없습니다!</h2><br><br><br><br>';
        }
        function f_endless() {
            var v_scrollTop = document.documentElement.scrollTop;
            var v_clientHeight = document.documentElement.clientHeight;
            var v_scrollHeight = document.documentElement.scrollHeight;
        
            //닿기 전에 (20의 튜닝값 줌)
            if (v_scrollTop + v_clientHeight > (v_scrollHeight-20) && scrollDrawCount < v_result.length) {
                v_container.innerHTML +=
                '<a href="'+'./Video.html?v='+v_result[scrollDrawCount][2]+'&sub='+v_result[scrollDrawCount][1]+'&con='+v_result[scrollDrawCount][3]+'&date='+v_result[scrollDrawCount][4]+'" id="id_a">'
                +'<div style="margin: 50px auto; width: 800px; height: 200px;">'
                +    '<div style="height: 100%; width: 320px; background-image: url('+v_result[scrollDrawCount][0]+'); background-size: 100% 100%;display: inline-block;"></div>'
                +    '<div style="width: 470px; height: 100%; display: inline-block; vertical-align: top;">'
                +        '<b>'+v_result[scrollDrawCount][1]+'</b>'
                +        '<hr>'
                +        '<span style="color: gray;">'+v_result[scrollDrawCount][4]+'</span>'
                +        '<br>'
                +        '<br>'
                +        '<span>'+v_result[scrollDrawCount][3]+'</span>'
                +    '</div>'
                +'</div>'
                +'</a>';
                scrollDrawCount++;
            }
        
        }    
        window.addEventListener("scroll",f_endless);
        
        function f_home() {
            location.replace("./MyProject.html");
            // location.href = "./MyProject.html";
        }

        function f_over(p_cu) {
            p_cu.style.cursor = "pointer";
        }



    </script>
</body>

</html>